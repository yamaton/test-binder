#!/bin/bash

# jupyterlab-lsp fails to find bash-language-server if installed with '-g'.
# Related? https://github.com/jupyter-lsp/jupyterlab-lsp/issues/181
npm install bash-language-server
wget https://raw.githubusercontent.com/yamaton/bash-language-server/fix-get-options/server/src/get-options.sh
chmod +x get-options.sh
mv -f get-options.sh node_modules/bash-language-server/src/

TOOLS=( "$(cat ./_tools.txt)" )
for _tool in ${TOOLS[*]}; do
    echo "Installing ${_tool}"
    condax install -c conda-forge -c bioconda "$_tool"
done

conda clean --all --yes --force-pkgs-dirs
